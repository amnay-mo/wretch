!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.wretch=r()}(this,function(){"use strict";const t=Object.assign||function(t){for(var r,n=1;n<arguments.length;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};var r=function(n,o,e){if(void 0===e&&(e=!1),!n||!o||"object"!=typeof n||"object"!=typeof o)return n;var u=t({},n,o);for(var i in o)o.hasOwnProperty(i)&&(o[i]instanceof Array&&n[i]instanceof Array?u[i]=e?n[i].concat(o[i]):o[i]:"object"==typeof o[i]&&"object"==typeof n[i]&&(u[i]=r(n[i],o[i],e)));return u},n={defaults:{},errorType:null},o=function(t){return function(o){void 0===o&&(o={});var e=fetch(t,r(n.defaults,o)).then(function(t){return t.ok?t:t[n.errorType||"text"]().then(function(r){var o=new Error(r);throw o[n.errorType]=r,o.status=t.status,o.response=t,o})}),u=[],i=function(t){return u.reduce(function(t,r){return t.catch(r)},t)},f=function(t){return function(r){return i(t?e.then(function(r){return r&&r[t]()}).then(function(t){return t&&r&&r(t)||t}):e.then(function(t){return t&&r&&r(t)||t}))}},s={res:f(null),json:f("json"),blob:f("blob"),formData:f("formData"),arrayBuffer:f("arrayBuffer"),text:f("text"),error:function(t,r){return u.push(function(n){if(n.status!==t)throw n;r(n)}),s},badRequest:function(t){return s.error(400,t)},unauthorized:function(t){return s.error(401,t)},forbidden:function(t){return s.error(403,t)},notFound:function(t){return s.error(404,t)},timeout:function(t){return s.error(408,t)},internalError:function(t){return s.error(500,t)}};return s}},e=function(){function e(t,r){void 0===r&&(r={}),this._url=t,this._options=r}return e.prototype.defaults=function(t){return n.defaults=t,this},e.prototype.mixdefaults=function(t){return n.defaults=r(n.defaults,t),this},e.prototype.errorType=function(t){return n.errorType=t,this},e.prototype.url=function(t){return new e(t,this._options)},e.prototype.baseUrl=function(t){return function(r,n){return void 0===r&&(r=""),void 0===n&&(n={}),new e(t+r,n)}},e.prototype.options=function(t){return new e(this._url,t)},e.prototype.query=function(t){return new e(u(this._url,t),this._options)},e.prototype.headers=function(t){return new e(this._url,r(this._options,{headers:t}))},e.prototype.accept=function(t){return this.headers({Accept:t})},e.prototype.content=function(t){return this.headers({"Content-Type":t})},e.prototype.get=function(t){return void 0===t&&(t={}),o(this._url)(r(t,this._options))},e.prototype.delete=function(n){return void 0===n&&(n={}),o(this._url)(t({},r(n,this._options),{method:"DELETE"}))},e.prototype.put=function(n){return void 0===n&&(n={}),o(this._url)(t({},r(n,this._options),{method:"PUT"}))},e.prototype.post=function(n){return void 0===n&&(n={}),o(this._url)(t({},r(n,this._options),{method:"POST"}))},e.prototype.patch=function(n){return void 0===n&&(n={}),o(this._url)(t({},r(n,this._options),{method:"PATCH"}))},e.prototype.body=function(r){return new e(this._url,t({},this._options,{body:r}))},e.prototype.json=function(t){return this.content("application/json").body(JSON.stringify(t))},e.prototype.formData=function(t){var r=new FormData;for(var n in t)if(t[n]instanceof Array)for(var o=0,e=t[n];o<e.length;o++){var u=e[o];r.append(n+"[]",u)}else r.append(n,t[n]);return this.body(r)},e}(),u=function(t,r){var n=new URLSearchParams,o=t.indexOf("?");for(var e in r)if(r[e]instanceof Array)for(var u=0,i=r[e];u<i.length;u++){var f=i[u];n.append(e,f)}else n.append(e,r[e]);return~o?t.substring(0,o)+"?"+n.toString():t+"?"+n.toString()};"undefined"==typeof self&&(global.URLSearchParams=require("url").URLSearchParams);return function(t,r){return void 0===t&&(t=""),void 0===r&&(r={}),new e(t,r)}});
//# sourceMappingURL=wretch.js.map
